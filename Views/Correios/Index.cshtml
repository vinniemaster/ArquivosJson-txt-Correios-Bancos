@{
    ViewData["Title"] = "Consulta CEP";
}

<div class="row">
    <div class="col-md-6">
        <h4>Consulta CEP</h4>
        <hr />
        <label for="CEPinput">Digite o CEP:</label>
        <input type="text" id="CEPinput">
        <button onclick="ConsultaCEP()" class="btn btn-secondary" id="ButtonConsulta">Consultar</button>
        <dl class="row">
            <dt class="col-sm-3">
                Bairro
            </dt>
            <dd class="col-sm-10">
                <input class="form-control" type="text" id="Bairro" disabled readonly>
            </dd>
            <dt class="col-sm-3">
                CEP
            </dt>
            <dd class="col-sm-10">
                <input class="form-control" type="text" id="CEP" disabled readonly>
            </dd>
            <dt class="col-sm-3">
                Cidade
            </dt>
            <dd class="col-sm-10">
                <input class="form-control" type="text" id="Cidade" disabled readonly>
            </dd>
            <dt class="col-sm-3">
                Complemento
            </dt>
            <dd class="col-sm-10">
                <input class="form-control" type="text" id="Complemento" disabled readonly>
            </dd>
            <dt class="col-sm-3">
                Endereço
            </dt>
            <dd class="col-sm-10">
                <input class="form-control" type="text" id="End" disabled readonly>
            </dd>
            <dt class="col-sm-3">
                UF
            </dt>
            <dd class="col-sm-10">
                <input class="form-control" type="text" id="UF" disabled readonly>
            </dd>
        </dl>
    </div>
</div>

@section Scripts{
    <script>
        function ConsultaCEP() {
            var jsonInput = {};
            var CEP = $('#CEPinput').val();

            $.ajax(
            {
                type: 'GET',
                url: '/Correios/GetCEP?CEP=' + CEP,
                data: { jsonInput: JSON.stringify(jsonInput) },
                success: function (response) {
                    $('#Bairro').val(response.bairro);
                    $('#CEP').val(response.cep);
                    $('#Cidade').val(response.cidade);
                    $('#Complemento').val(response.complemento2);
                    $('#End').val(response.end);
                    $('#UF').val(response.uf);
                },
            });
        }
    </script>
}